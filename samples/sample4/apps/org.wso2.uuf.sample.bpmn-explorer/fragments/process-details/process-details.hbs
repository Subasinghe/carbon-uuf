{{!--headJs "js/process-details.js"--}}
{{css "css/modal.css"}}
<table class="table table-responsive table-striped" id="process-view">
    <tr>
        <th>Package Name</th>
        <th>Process Name</th>
        <th>Process Definition ID</th>
        <th>Version</th>
        <th>Action</th>
    </tr>
    {{#each ../data}}
    <tr>
        <td>{{package-name}}</td>
        {{#if processes}}
            {{#each processes}}
                {{#if @last}}
                    <td>{{process-name}}</td>
                    <td><a href="" data-toggle="modal" data-target="#diagram"
                           onclick="$('#imgStatus').text('');$('#processDiagram').attr('src','{{image-data}}');">{{process-def-id}}</a>
                    </td>
                    <td>{{version}}</td>
                    <td><a href="startProcess?id={{process-def-id}}">
                        <button class="btn-start btn btn-xs btn-info">Start</button>
                    </a></td>

                {{else}}
                    <td>{{process-name}}</td>
                    <td><a href="" data-toggle="modal" data-target="#diagram"
                           onclick="$('#imgStatus').text('');$('#processDiagram').attr('src','{{image-data}}');">{{process-def-id}}</a>
                    </td>
                    <td>{{version}}</td>
                    <td><a href="startProcess?id={{process-def-id}}">
                        <button class="btn-start btn btn-xs btn-info">Start</button>
                    </a></td>
                    <tr>
                        <td rowspan="2"></td>
                    </tr>
                {{/if}}
            {{/each}}
        {{else}}
            <td>{{process-name}}</td>
            <td><a href="" data-toggle="modal" data-target="#diagram"
                   onclick="$('#imgStatus').text('');$('#processDiagram').attr('src','{{image-data}}');">{{process-def-id}}</a>
            </td>
            <td>{{version}}</td>
            <td><a href="startProcess?id={{process-def-id}}">
                <button class="btn-start btn btn-xs btn-info">Start</button>
            </a></td>
        {{/if}}
        </tr>
    {{/each}}
</table>

<div class="modal fade" id="diagram" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-center model-lg modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Process Diagram</h4>
            </div>
            <div class="modal-body">
                <div id="diagramScroll">
                    <img id="processDiagram" src="" />
                    <p id="imgStatus"></p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade bs-example-modal-sm" id="processStart" tabindex="-1" role="dialog"
     aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel"><span class="processStatus">Process</span></h4>
            </div>
            <div class="modal-footer" style="text-align:center">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<div class="modal fade bs-example-modal-sm" id="processStartError" tabindex="-1" role="dialog"
     aria-labelledby="processStartErrorLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="processStartErrorLabel" style="color: #a94442;"><span
                        class="processStatusError">Error Occurred</span></h4>
            </div>
            <div class="modal-body">
                <div id="reassignErrorMessageArea" class="alert alert-danger alert-dismissible" role="alert"
                     align="left">
                    <p id="processStartErrorMsg" style="text-align:center"></p>
                </div>
            </div>
            <div class="modal-footer" style="text-align:center">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

